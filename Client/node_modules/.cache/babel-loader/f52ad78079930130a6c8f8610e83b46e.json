{"ast":null,"code":"import { arrayEquals } from './Helpers';\nimport { King, Piece } from './Pieces';\nconst BLACK = false;\nconst WHITE = true;\n\nclass ChessGame {\n  constructor() {\n    this.turn = WHITE;\n    this.kingPos = [[0, 4], [7, 4]];\n  }\n\n  isLegalMove(legalMoves, endPos) {\n    // Check that move is legal\n    for (let move of legalMoves) {\n      if (arrayEquals(move, endPos)) {\n        return true;\n      }\n    }\n  }\n\n  isKingAttacked(kingPos, oppSqrsCovered) {}\n\n  opposingSquaresCovered(board, turn) {\n    let squaresCovered = []; // console.log(board);\n\n    for (let r = 0; r < 8; r++) {\n      for (let c = 0; c < 8; c++) {\n        if (board[r][c] instanceof Piece) {\n          const piece = board[r][c];\n          console.log(piece);\n\n          if (turn !== piece.type) {\n            console.log(\"Yoing\");\n            squaresCovered.push(piece.legalMoves(board, [r, c], piece));\n          }\n        }\n      }\n\n      console.log(\"End Opposing\");\n    }\n\n    return squaresCovered;\n  }\n\n  move(board, startPos, endPos, piece) {\n    console.log(\"Moving piece\"); // If legal move\n\n    const [a, b] = startPos;\n    const [x, y] = endPos;\n    const legalMoves = piece.legalMoves(board, startPos, piece);\n\n    if (this.isLegalMove(legalMoves, endPos)) {\n      // let newBoard = [...board];\n      // newBoard[x][y] = piece;\n      // Check move doesn't allow king to be attacked\n      const kIdx = piece.type ? 0 : 1;\n      console.log(\"Beofre Sqars covered\");\n      const sqrsCovered = this.opposingSquaresCovered(board, piece.type);\n      console.log(\"After sqrs covered\");\n      console.log(sqrsCovered);\n\n      for (let move of sqrsCovered) {\n        console.log(\"In king loop\");\n\n        if (arrayEquals(move, this.kingPos)) {\n          return false;\n        }\n      }\n\n      if (piece instanceof King) {\n        this.kingPos[kIdx] = endPos;\n      }\n\n      board[a][b] = \"-\";\n      board[x][y] = piece;\n      return board;\n    }\n\n    return false;\n  }\n\n}\n\nexport default ChessGame;","map":{"version":3,"names":["arrayEquals","King","Piece","BLACK","WHITE","ChessGame","constructor","turn","kingPos","isLegalMove","legalMoves","endPos","move","isKingAttacked","oppSqrsCovered","opposingSquaresCovered","board","squaresCovered","r","c","piece","console","log","type","push","startPos","a","b","x","y","kIdx","sqrsCovered"],"sources":["/Users/benjamincritoph/Programming/React/chess/src/ChessGame.js"],"sourcesContent":["import { arrayEquals } from './Helpers';\nimport { King, Piece } from './Pieces';\n\nconst BLACK = false;\nconst WHITE = true;\n\nclass ChessGame {\n  constructor(){\n    this.turn = WHITE;\n    this.kingPos = [[0, 4], [7, 4]];\n  }\n  isLegalMove(legalMoves, endPos){\n    // Check that move is legal\n    for(let move of legalMoves){\n      if(arrayEquals(move, endPos)){\n        return true;\n      }\n    }\n  }\n  isKingAttacked(kingPos, oppSqrsCovered) {\n\n  }\n  opposingSquaresCovered(board, turn) {\n    let squaresCovered = [];\n    // console.log(board);\n    for (let r = 0; r < 8; r++) {\n      for (let c = 0; c < 8; c++) {\n        if (board[r][c] instanceof Piece) {\n          const piece = board[r][c];\n          console.log(piece);\n          if (turn !== piece.type) {\n            console.log(\"Yoing\");\n            squaresCovered.push(piece.legalMoves(board, [r, c], piece));\n          }\n        }\n      }\n      console.log(\"End Opposing\");\n    }\n    return squaresCovered;\n\n  }\n  move(board, startPos, endPos, piece) {\n    console.log(\"Moving piece\");\n    // If legal move\n    const [a, b] = startPos;\n    const [x, y] = endPos;\n    const legalMoves = piece.legalMoves(board, startPos, piece);\n    if(this.isLegalMove(legalMoves, endPos)){\n      // let newBoard = [...board];\n      // newBoard[x][y] = piece;\n      // Check move doesn't allow king to be attacked\n      const kIdx = piece.type? 0 : 1;\n      console.log(\"Beofre Sqars covered\");\n      const sqrsCovered = this.opposingSquaresCovered(board, piece.type);\n      console.log(\"After sqrs covered\");\n      console.log(sqrsCovered);\n      for (let move of sqrsCovered) {\n        console.log(\"In king loop\");\n        if (arrayEquals(move, this.kingPos)) {\n          return false;\n        }\n      }\n      if (piece instanceof King) {\n        this.kingPos[kIdx] = endPos;\n      }\n      board[a][b] = \"-\";\n      board[x][y] = piece;\n      return board;\n    }\n    return false;\n  }\n}\n\nexport default ChessGame;"],"mappings":"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"},"metadata":{},"sourceType":"module"}